<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Collection</title>
    
    <link rel="stylesheet" href="back.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://applepay.cdn-apple.com/jsapi/v1/apple-pay-sdk.js"></script>
    </head>
<body>
    <h1>Car Collection</h1>
    <div class="cars-container">
        <div class="car-section">
            <img src="ferari.jpg" alt="Ferrari 488 GTB">
            <div id="ferrari-specs">
                <p id="FR">Ferrari 488 GTB</p>
                <div class="price">$250,000</div>
                <nav>
                    <ul>
                        <li><strong>Engine:</strong> 3.9-liter twin-turbo V8</li>
                        <li><strong>Horsepower:</strong> 660 hp</li>
                        <li><strong>Drive:</strong> Rear-wheel drive</li>
                        <li><strong>0-60 mph:</strong> 3.0 seconds</li>
                        <li><strong>Top Speed:</strong> 205 mph</li>
                    </ul>
                </nav>
                <p id="description">The Ferrari 488 GTB is a mid-engine sports car that represents the pinnacle of Italian automotive engineering, offering breathtaking performance and stunning design.</p>
                <div class="payment-options">
                    <button class="apple-pay-button" data-item="Ferrari 488 GTB" data-price="250000"></button>
                </div>
            </div>
        </div>
        
        <div class="car-section">
            <img src="bugatti.jpg" alt="Bugatti Chiron">
            <div id="bugatti-specs">
                <p id="BG">Bugatti Chiron</p>
                <div class="price">$3,000,000</div>
                <nav>
                    <ul>
                        <li><strong>Engine:</strong> Quad-turbo 8.0L W16</li>
                        <li><strong>Horsepower:</strong> 1,500 hp</li>
                        <li><strong>Drive:</strong> All-wheel drive</li>
                        <li><strong>0-60 mph:</strong> 2.4 seconds</li>
                        <li><strong>Top Speed:</strong> 261 mph (limited)</li>
                    </ul>
                </nav>
                <p id="description">The Bugatti Chiron redefines hypercar performance with its revolutionary engineering, unparalleled luxury, and record-breaking speed capabilities.</p>
                <div class="payment-options">
                    <button class="apple-pay-button" data-item="Bugatti Chiron" data-price="3000000"></button>
                </div>
            </div>
        </div>
        
        <div class="car-section">
            <img src="2025 aston martinv antage.jpg" alt="Aston Martin DB5 Vintage">
            <div id="aston-specs">
                <p id="AM">Aston Martin DB5</p>
                <div class="price">$1,200,000</div>
                <nav>
                    <ul>
                        <li><strong>Engine:</strong> 4.0-liter inline-6</li>
                        <li><strong>Horsepower:</strong> 282 hp</li>
                        <li><strong>Drive:</strong> Rear-wheel drive</li>
                        <li><strong>0-60 mph:</strong> 8.0 seconds</li>
                        <li><strong>Top Speed:</strong> 145 mph</li>
                    </ul>
                </nav>
                <p id="description">The iconic Aston Martin DB5, made famous by James Bond, represents British automotive elegance with its timeless design and superb craftsmanship from the golden age of motoring.</p>
                <div class="payment-options">
                    <button class="apple-pay-button" data-item="Aston Martin DB5" data-price="1200000"></button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Select all Apple Pay buttons
        const applePayButtons = document.querySelectorAll('.apple-pay-button');
        
        // Function to initiate the Apple Pay session
        function initiateApplePay(event) {
            // ... (Your existing initiateApplePay function logic)
            const item = event.target.dataset.item;
            const price = event.target.dataset.price;
            
            // NOTE: The Apple Pay API requires a numeric amount string. Ensure data-price is an integer string.
            const paymentRequest = {
                countryCode: 'US',
                currencyCode: 'USD',
                merchantCapabilities: ['supports3DS'],
                supportedNetworks: ['visa', 'masterCard', 'amex', 'discover'],
                total: {
                    label: 'Car Collection: ' + item,
                    type: 'final',
                    amount: price // Use the string price from data-attribute
                },
                requiredBillingContactFields: ['postalAddress'],
                requiredShippingContactFields: []
            };

            // Version 3 is the recommended version
            const session = new ApplePaySession(3, paymentRequest);

            session.onvalidatemerchant = function(event) {
                const validationURL = event.validationURL;
    
                session.completeMerchantValidation({});
            };

            session.onpaymentauthorized = function(event) {
                // Process payment with your payment processor
                alert(`Payment authorized for ${item}!`);
                session.completePayment(ApplePaySession.STATUS_SUCCESS);
            };

            session.oncancel = function() {
                console.log('Apple Pay payment cancelled');
            };

            session.begin();
        };


        // Checks if Apple Pay is available
        if (window.ApplePaySession && ApplePaySession.canMakePayments()) {
            applePayButtons.forEach(button => {
                // Create native Apple Pay button styling
                button.style.display = 'inline-block';
                // Use WebKit properties for native button rendering
                button.style.setProperty('-webkit-appearance', '-apple-pay-button');
                button.style.setProperty('-apple-pay-button-type', 'buy');
                button.style.setProperty('-apple-pay-button-style', 'black');
                
                button.addEventListener('click', initiateApplePay);
            });
        } else {
            console.log('Apple Pay is not available or device not configured');
            // Hide buttons if Apple Pay is not available
            applePayButtons.forEach(button => {
                button.style.display = 'none';
            });
        }
    </script>
</body>
</html>