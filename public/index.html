<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Car Collection</title>
  <link rel="stylesheet" href="back.css">
</head>
<script>

  if (window.ApplePaySession && ApplePaySession.canMakePayments()) {
  document.querySelector('.apple-pay-button').addEventListener('click', () => {
    const request = {
      countryCode: 'US',
      currencyCode: 'USD',
      supportedNetworks: ['visa', 'masterCard', 'amex'],
      merchantCapabilities: ['supports3DS'],
      total: {
        label: 'Austin Martin',
        amount: '600000.00'
      }
    };

    const session = new ApplePaySession(3, request);

    session.onvalidatemerchant = (event) => {
      fetch('/validate-merchant', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ validationURL: event.validationURL })
      })
      .then(res => res.json())
      .then(data => session.completeMerchantValidation(data));
    };

    session.onpaymentauthorized = (event) => {
      // You would send event.payment to your server here
      session.completePayment(ApplePaySession.STATUS_SUCCESS);
    };

    session.begin();
  });
}
if (window.ApplePaySession && ApplePaySession.canMakePayments()) {
  document.querySelector('.apple-pay-button').addEventListener('click', () => {
    const request = {
      countryCode: 'US',
      currencyCode: 'USD',
      supportedNetworks: ['visa', 'masterCard', 'amex'],
      merchantCapabilities: ['supports3DS'],
      total: {
        label: 'Austin Martin',
        amount: '600000'
      }
    };

    const session = new ApplePaySession(3, request);

    session.onvalidatemerchant = (event) => {
      // Call your server to validate the merchant
      fetch('/validate-merchant', {
        method: 'POST',
        body: JSON.stringify({ validationURL: event.validationURL })
      })
      .then(response => response.json())
      .then(data => session.completeMerchantValidation(data));
    };

    session.onpaymentauthorized = (event) => {
      // Process payment here
      session.completePayment(ApplePaySession.STATUS_SUCCESS);
    };

    session.begin();
  });
}
</script>

<script>
  if (window.ApplePaySession && ApplePaySession.canMakePayments()) {
    console.log("Apple Pay is available");
  } else {
    console.log("Apple Pay is not available");
  }
</script>


<body>
  <h1>Car Collection</h1>
  <div class="cars-container">

    <!-- Ferrari -->
    <div class="car-section">
      <img src="img/ferari.jpg" alt="Ferrari">
      <div id="Ferrari-specs">
        <p id="FR">Ferrari 488 GTB</p>
        <div class="price">$250,000</div>
        <nav>
          <ul>
            <li><strong>Engine:</strong> 3.9-liter twin-turbo V8</li>
            <li><strong>Horsepower:</strong> 660 hp</li>
            <li><strong>Drive:</strong> Rear-wheel drive</li>
            <li><strong>0-60 mph:</strong> 3.0 seconds</li>
            <li><strong>Top Speed:</strong> 205 mph</li>
          </ul>
        </nav>
        <p id="description">
          The Ferrari 488 GTB is a mid-engine sports car that represents the pinnacle of
          Italian automotive engineering, offering breathtaking performance and stunning design.
        </p>
        <div class="payment-options">
        <button class="apple-pay-button" data-item="Ferrri" data-price="1400000">
          Buy with Apple Pay
        </button>
        </div>
      </div>
    </div>

    <!-- Bugatti -->
    <div class="car-section">
      <img src="img/bugatti.jpg" alt="Bugatti">
      <div id="bugatti-specs">
        <p id="BG">Bugatti Chiron</p>
        <div class="price">$3,000,000</div>
        <nav>
          <ul>
            <li><strong>Engine:</strong> Quad-turbo 8.0L W16</li>
            <li><strong>Horsepower:</strong> 1,500 hp</li>
            <li><strong>Drive:</strong> All-wheel drive</li>
            <li><strong>0-60 mph:</strong> 2.4 seconds</li>
            <li><strong>Top Speed:</strong> 261 mph (limited)</li>
          </ul>
        </nav>
        <p id="description">
          The Bugatti Chiron redefines hypercar performance with its revolutionary
          engineering, unparalleled luxury, and record-breaking speed capabilities.
        </p>
        <button class="apple-pay-button" data-item="Bugatti Chiron" data-price="3000000">
          Buy with Apple Pay
        </button>
      </div>
    </div>

  <!-- Aston Martin -->
  <div class="car-section">
    <img src="img/Austin Martin.jpg">
    <div id="aston-specs">
     <p id="AM">Aston Martin DB5</p>
<div class="price">$1,200,000</div>

      <nav>
        <ul>
          <li><strong>Engine:</strong> 4.0-liter inline-6</li>
          <li><strong>Horsepower:</strong> 282 hp</li>
          <li><strong>Drive:</strong> Rear-wheel drive</li>
          <li><strong>0-60 mph:</strong> 8.0 seconds</li>
          <li><strong>Top Speed:</strong> 145 mph</li>
        </ul>
      </nav>
      <p id="description">
        The iconic Aston Martin DB5, made famous by James Bond, represents British
        automotive elegance with its timeless design and superb craftsmanship from the golden age of motoring.
      </p>
      <div class="payment-options">
         <button class="apple-pay-button" data-item="Austin Martin" data-price="600000">
          Buy with Apple Pay
        </button>
      </div>
    </div>
  </div>

  </div>
<script src="/public/apple-pay-integration.js"></script>
</body>
</html>